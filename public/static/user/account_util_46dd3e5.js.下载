var AccountUtil={};AccountUtil.saveToken=function(n,t,e){AccountUtil.clearToken(function(){function t(n,t){var e=$($(".login_iframe")[n]),i=t[n];e.attr({src:i});var a=setTimeout(function(){o(n,t)},3e3);e.load(function(){clearTimeout(a),o(n,t)})}function o(n,o){n>=o.length-1?e&&e():t(n+1,o)}var i=["/account/setToken?token="+n],a=[];$.each(i,function(n,t){t&&a.push(t)}),t(0,a)})},AccountUtil.clearToken=function(n){var t=$('<iframe style="height:0;width:0;border: none;" name="child"></iframe>'),e="/account/removeToken";t.attr({src:e}),t.load(n),$("body").append(t)},AccountUtil.isIE=function(){return"Microsoft Internet Explorer"==navigator.appName&&"MSIE8.0"==navigator.appVersion.split(";")[1].replace(/[ ]/g,"")||"Microsoft Internet Explorer"==navigator.appName&&"MSIE9.0"==navigator.appVersion.split(";")[1].replace(/[ ]/g,"")},AccountUtil.modifyNickname=function(n,t){var e=n.val();if(void 0==e||0==getStrLength(e))return void $("#nickname_fall").show().html("昵称不能为空");var o=/^([0-9a-zA-Z]|[\u4E00-\u9FA5])*$/;if(!o.test(e))return void("web"==t?$("#nickname_fall").show().html("昵称只能包括中英文、数字"):"wap"==t&&($(".nickname_error_hint").show().css({top:0}),$(".mo_nickname_btn").html("保存")));e=encodeURI(e);var i="/api/account/modifyNickname?nickName="+e;ajax({type:"POST",url:i,dataType:AccountUtil.isIE()?"jsonp":"json",withCredentials:!0}).done(function(){"web"==t?($("#j-success-icon").show(),$("#nickname_fall").hide()):"wap"==t&&(window.location.href="/course/list/0/1.html")},function(n){var e=n.responseText;try{var o=JSON.parse(e);30013==o.errorCode?"web"==t?$("#nickname_fall").show().html("昵称已被霸占了，换个试试~"):"wap"==t&&($(".nickname_error_hint").show().css({top:0}).html("<span></span>昵称已被霸占了，换个试试~"),$(".mo_nickname_btn").html("保存")):30017==o.errorCode?window.location.reload():"web"==t?$("#nickname_fall").show().html("昵称修改失败~"):"wap"==t&&($(".nickname_error_hint").show().css({top:0}).html("<span></span>昵称修改失败~"),$(".mo_nickname_btn").html("保存"))}catch(i){}})},AccountUtil.getPageType=function(n){var t=n.split("/"),e=t.length,o=t[e-1].split(".")[0];return o},AccountUtil.resetJumpLink=function(n,t){var e=document.referrer;e?"orderDetail"==t?window.location.href=e.indexOf("listLesson")>0?e:n:history.go(-1):window.location.href=n},AccountUtil.judgeTel=function(n,t,e){var o=n,i=/^1[0-9]{10}$/;i.test(o)?t&&t():e&&e()},AccountUtil.islogin=function(){var n=$("#j-logined").val();return n&&1==n?!0:!1};